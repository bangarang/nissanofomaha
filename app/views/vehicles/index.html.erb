<% provide(:title, 'Used Vehicles') %>
<section class="main_top used_top" style="background-image: url(<%= asset_path('used_cars.jpg') %>)">
  <div class="container used_main">
    <h2>THE EXPERIENCE IS ANYTHING BUT SECONDHAND</h2>
    <p>At Nissan of Omaha, our technicians prep each vehicle for the lot with a rigorous inspection, making sure you’re bringing home just what you expect. Buying used here doesn’t mean crossing your fingers and leaving with a bunch of unanswered questions. Our customer service training extends beyond the shiny new car showroom. Whatever your price range may be, we’ll help find a great match from our rotating, expansive selection of used and certified pre-owned vehicles. Come shop with us at Nissan of Omaha today. 
</h2>
  </div>
</section>

<div class="filter">
  <h3>Filter Your Results</h3>
</div>



<div ng-controller="VehiclesCtrl">
  <div class="controls">
    <div class="control">
      <h5 class="price-click">Price</h5>
      <ul class="price">
        <li><p ng-click="min_price='0'; max_price='5000'">$0 - $5,000</p></li>
        <li><p ng-click="min_price='5000'; max_price='10000'">$5,000 - $10,000</p></li>
        <li><p ng-click="min_price='10000'; max_price='20000'">$10,000 - $20,000</p></li>
        <li><p ng-click="min_price='20000'; max_price='30000'">$20,000 - $30,000</p></li>
        <li><p ng-click="min_price='30000'; max_price='1000000'">$30,000 - Above</p></li>
        <li><p ng-click="min_price=nil; max_price=nil">Show All</p></li>
      </ul>
    </div>
    <div class="control">
      <h5 class="odometer-click">Mileage</h5>
      <ul class="odometer">
        <li><p ng-click="min_odometer='0'; max_odometer='25'">0 - 25k</p></li>
        <li><p ng-click="min_odometer='25'; max_odometer='50'">25k - 50k</p></li>
        <li><p ng-click="min_odometer='50'; max_odometer='75'">50k - 75k</p></li>
        <li><p ng-click="min_odometer='75'; max_odometer='1000'">75k - Above</p></li>
        <li><p ng-click="min_odometer=nil; max_odometer=nil">Show All</p></li>
      </ul>
    </div>
    <div class="control">
      <h5 class="make-click">Make</h5>
      <ul class="make">
        <% for m,k in @makes %>
        <li id="<%= m %>"><p ng-click="the_make='<%= m %>'; the_model=nil"><%= m %></p></li>
        <% end %>
        <li><p ng-click="the_make=nil">Show All</p></li>
      </ul>
    </div>
    <div class="control">
      <h5 class="model-click">Model</h5>
      <ul class="model">
        <% for m,k in @makes %>
        <li id="<%= m %>" class="model_group">
          <ul>
            <% for t in k %>
            <li><p ng-click="the_model='<%= t %>'"><%= t %></p></li>
            <% end %>
            <li><p ng-click="the_model=nil">Show All</p></li>
          </ul>
        </li>
        <% end %>
        
      </ul>
    </div>
  </div>


  <div class="container">
    <div class="vehiclegroup">
      <div ng-show="loading">Loading Cars...</div>
      <ul class="vehicles">
        <li data-ng-repeat="item in items | orderBy:'-year' | filter:query | filter:priceFilter | filter:odometerFilter | filter:mpgFilter | filter:modelFilter | filter:makeFilter" class="repeat-item">
          <div class="vehicle" >
            <div class="top"><p class="year">{{item.year}}</p><p class="drive">{{item.drivetrain_desc}}</p></div>
            <div class="main">
              <a href="/used/{{item.vin}}"><div class="image" style="background-image: url('{{item.photos[0]}}') "></div></a>
              <p class="name"><a href="/used/{{item.vin}}">{{item.make}} {{item.model }}</a></p>
              <p class="price">${{item.price | number:0}}</p>
              
              <div class="bottom">
                <div class="comments">
                  <p class="ma">Transmission</p>
                  <p class="mpg">Miles per Gallon</p>
                  <p class="mileage">Mileage</p>
                </div>
                <div class="chips">
                  <p class="ma">{{item.m_a}}</p>
                  <p class="mpg">{{item.city_mpg}}/{{item.highway_mpg}}</p>
                  <p class="mileage">{{item.mileage }} k</p>
                </div>
                
              </div>
            </div>
          </div>
        </li> 
      </ul>
    </div>
  </div>
  
</div>